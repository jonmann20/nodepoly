<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">

<dom-module id="sticky-note">
	<template>
		<style>
			:host {
				position: relative;
				display: inline-block;
				width: 250px;
				height: 225px;
				margin: 10px;
				padding: 16px;
    			border-radius: 2px;
  				color: #333;
				background: radial-gradient(#f4f1b2, #eae672);
			    box-shadow: 0 1px 7px rgba(0, 0, 0, 0.06), 0 1px 3px rgba(0, 0, 0, 0.15);
			    font-family: cursive;
			    transition: opacity 0.5s;
			}

			:host::before,
			:host::after {
				z-index: -1;
				position: absolute;
				content: '';
				bottom: 15px;
				left: 10px;
				width: 50%;
				top: 80%;
				max-width: 300px;
				background: rgba(0, 0, 0, 0.28);
				box-shadow: 0 15px 10px rgba(0, 0, 0, 0.28);
				-webkit-transform: rotate(-3deg);
				transform: rotate(-3deg);
			}

			:host::after {
				-webkit-transform: rotate(3deg);
				transform: rotate(3deg);
				right: 10px;
				left: auto;
			}

			:host.hidden {
				opacity: 0;
			}

			:host.hidden::after,
			:host.hidden::before {
				display: none;
			}

			.title {
				font-size: 1.1em;
				margin-top: 0;
			}

			.button-wrap {
				position: absolute;
				bottom: 25px;
				text-align: center;
				width: calc(100% - 32px);
			}

			paper-button:first-child {
				margin-right: 25px;
			}
		</style>

		<div>
			<h1 class="title">{{title}}</h1>

			<div class="button-wrap">
				<paper-button raised>{{answerPositive}}</paper-button>
				<paper-button raised>{{answerNegative}}</paper-button>
			</div>
		</div>
	</template>
	<script>
		Polymer({
			is: 'sticky-note',
			properties: {
				title: String,
				answerPositive: {
					type: String,
					value: 'Yes'
				},
				answerNegative: {
					type: String,
					value: 'No'
				}
			},
			listeners: {
				'tap': 'hide'
			},
			hide: (e, obj) => {
				if(e.target.tagName === 'PAPER-BUTTON') {
					let stickyNote = e.target.parentElement.parentElement.parentElement;
					stickyNote.className = 'hidden';

					setTimeout(() => {
						stickyNote.remove();
					}, 525);
				}
			}
		});
  </script>
</dom-module>
